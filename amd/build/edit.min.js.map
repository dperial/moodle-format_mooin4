{"version":3,"sources":["../src/edit.js"],"names":["define","$","sectionList","sectionNewEdit","sectionNewSave","courseIndex","chapterIndex","sectionIndex","saveIndex","idSection","sectionDone","sectionUrl","click","event","currentTarget","classList","substring","length","chapterSection","index","Y","log","courseIndexDoc","chapterIndexDoc","sectionIndexDoc","chapterSectionDoc","css","inputText","attr","focus","prop","preventDefault","value","data","id","defaultValue","sectiontext","courseid","chapterid","sectionid","sectionurl","sectiondone","blur","ajax","type","url","success","window","location","reload"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Edit Section (Lektion) Title in Chapter Card.\r\n *\r\n * @module     format_mooin4/edit\r\n * @copyright  2022 Perial Dupont Nguefack Kuaguim\r\n */\r\ndefine(['jquery'], ($) => {\r\n    var sectionList = $(\".editsection\");\r\n    var sectionNewEdit = '';\r\n    var sectionNewSave = '';\r\n    var courseIndex = 0;\r\n    var chapterIndex = 0;\r\n    var sectionIndex = 0;\r\n    var saveIndex = 0;\r\n    var idSection = 0;\r\n    var sectionDone = 0;\r\n    var sectionUrl = \"\";\r\n\r\n        $('.section_edit').click(function(event) {\r\n                // Fetch all the chapter- and section-id  to build the current clicked section in event\r\n                courseIndex = event.currentTarget.classList[0].substring(9, event.currentTarget.classList[0].length);\r\n                chapterIndex = event.currentTarget.classList[1].substring(10, event.currentTarget.classList[1].length);\r\n                sectionIndex = event.currentTarget.classList[2].substring(10, event.currentTarget.classList[2].length);\r\n                let chapterSection = chapterIndex + sectionIndex;\r\n                for (let index = 0; index < sectionList.length; index++) {\r\n                    Y.log('Check');\r\n                    Y.log(sectionList[index].classList);\r\n                    // Fetch all the chapter- and section-id  to build the current clicked section in document\r\n                    let courseIndexDoc = sectionList[index].classList[0].substring(9, sectionList[index].classList[0].length);\r\n                    let chapterIndexDoc = sectionList[index].classList[1].substring(10, sectionList[index].classList[1].length);\r\n                    let sectionIndexDoc = sectionList[index].classList[2].substring(10, sectionList[index].classList[2].length);\r\n                    let chapterSectionDoc = chapterIndexDoc + sectionIndexDoc;\r\n\r\n                    Y.log('chapterSection : ' + chapterSection + ' != ' + 'chapterSectionDoc : ' + chapterSectionDoc);\r\n                    // Y.log(sectionIndex[sectionIndex.length - 1]);\r\n                    if (chapterSection === chapterSectionDoc) {\r\n                        // Get the section id\r\n                        idSection = $(\".id_section\" + chapterSectionDoc);\r\n                        Y.log(idSection);\r\n                        sectionDone = $(\".section-done\" + chapterSectionDoc);\r\n                        sectionNewEdit = $(\".sectionEdit\" + chapterSectionDoc);\r\n                        sectionNewSave = $(\".sectionSave\" + chapterSectionDoc);\r\n                        // Let v = $('.section-id' + sectionIndexDoc);\r\n                        sectionNewEdit.css('display', 'none');\r\n                        sectionNewSave.css('display', 'inline-block');\r\n                        saveIndex = courseIndexDoc + chapterIndexDoc + sectionIndexDoc;\r\n                        let inputText = $(\".section\" + saveIndex);\r\n                        Y.log(inputText);\r\n                        sectionUrl = $(\".url_section\" + chapterSectionDoc);\r\n                        inputText.attr('readonly', false);\r\n                        inputText.focus();\r\n                        inputText.attr('contentEditable', true);\r\n                        inputText.css(\"cursor\", \"default\");\r\n                        inputText.prop(\"onclick\", null);\r\n                    }\r\n                }\r\n            });\r\n            $('.section_save').click(function(event) {\r\n                event.preventDefault();\r\n                sectionNewEdit.css('display', 'inline-block');\r\n                sectionNewSave.css('display', 'none');\r\n                var value = $(\".section\" + saveIndex);\r\n                value.attr(\"onclick\", \"return gtag_report_conversion('${sectionUrl[0].defaultValue}');\");\r\n                value.attr('readonly', true);\r\n                var data = {};\r\n                Y.log(sectionUrl);\r\n                data.id = idSection[0].defaultValue;\r\n                data.sectiontext = value[0].value;\r\n                data.courseid = courseIndex;\r\n                data.chapterid = chapterIndex;\r\n                data.sectionid = sectionIndex;\r\n                data.sectionurl = sectionUrl[0].defaultValue;\r\n                data.sectiondone = sectionDone[0].defaultValue;\r\n                value.css(\"cursor\", \"pointer\");\r\n                value.attr('contentEditable', 'false');\r\n                value.blur();\r\n                $.ajax({\r\n                    type: 'POST',\r\n                    data: data,\r\n                    url: 'edit_section_title.php',\r\n                    success: (data) => {\r\n                        Y.log(data);\r\n                        window.location.reload();\r\n                    }\r\n                });\r\n                // Window.location.reload();\r\n                /* Y.log(data); */\r\n            });\r\n    });"],"file":"edit.min.js"}