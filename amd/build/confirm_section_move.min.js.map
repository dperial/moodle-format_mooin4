{"version":3,"sources":["../src/confirm_section_move.js"],"names":["define","$","section_count","length","chapter_count","j","i","val","Y","log","sortable","connectWith","receive","event","x","data","uiSortable","bindings","classList","cur_chap","replace","cur_section","cur_ch","cur_sec","cur","first_chap","childNodes","first_section","course_id","first","first_ch","last_chap","nextSibling","last_section","last","last_ch","last_sec","target_section","target","className","section_move","courseid","current_chapter","current_section","first_chapter","last_chapter","direction","chapter_clicked","section_clicked","ajax","type","url","success","window","location","reload","disableSelection"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable require-jsdoc */\r\n/* eslint-disable camelcase */\r\n// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Change the position for section inside chapter in table of content (Chapter content one or many lesson),\r\n * By the way we have to update the format_mooin4_chapter, format_mooin4_section, course_sections Table and the lib.php content data\r\n *\r\n * @module     format_mooin4/confirm_section_move\r\n * @copyright  2022 Perial Dupont Nguefack Kuaguim\r\n */\r\n\r\n/* What is important here is the current section and chapter where we are, and the destionation chapter where we want to move\r\nthe selected section inside our table of content*/\r\n\r\n\r\ndefine(['jquery', 'jqueryui'], ($, jqueryui) =>{\r\n    var section_count = $(\"#chapter_body .section_find\").length;\r\n    var chapter_count = $(\".card #chapter_body\").length;\r\n\r\n    for (let j = 1; j < chapter_count + 1; j++) {\r\n      for (let i = 1; i < section_count + 1; i++) {\r\n        var val = `#section_move${j}${i}`;\r\n        Y.log(typeof (val));\r\n        $(val).sortable({\r\n            connectWith: \".draggable-zone\",\r\n            receive: function(event, ui) {\r\n              var x = $(this).data().uiSortable.bindings[0].classList;\r\n\r\n              var cur_chap = $(this).data().uiSortable.bindings[0].classList[3].replace('chapter', '');\r\n              var cur_section = $(this).data().uiSortable.bindings[0].classList[4].replace('section', '');\r\n              this.cur_ch = cur_chap;\r\n              this.cur_sec = cur_section;\r\n              var cur = cur_chap + cur_section;\r\n              Y.log('drop Data : ' + cur);\r\n              var first_chap = $(this).data().uiSortable.bindings[0].childNodes[1].classList[5].replace('chapter-id', '');\r\n              var first_section = $(this).data().uiSortable.bindings[0].childNodes[1].classList[6].replace('section-id', '');\r\n              var course_id = $(this).data().uiSortable.bindings[0].childNodes[1].classList[4].replace('course-id', '');\r\n              var first = first_chap + first_section;\r\n              this.first_ch = first_chap;\r\n              this.first_ch = first_section;\r\n              Y.log('first: : ' + first);\r\n              var last_chap = $(this).data().uiSortable.bindings[0].childNodes[1].nextSibling.classList[5]\r\n              .replace('chapter-id', '');\r\n              var last_section = $(this).data().uiSortable.bindings[0].childNodes[1].nextSibling.classList[6]\r\n              .replace('section-id', '');\r\n              var last = last_chap + last_section;\r\n              this.last_ch = last_chap;\r\n              this.last_sec = last_section;\r\n              Y.log('Last ' + last);\r\n              // Target section\r\n              var target_section = event.target.className;\r\n              Y.log('Target Section' + target_section);\r\n              var section_move = {};\r\n              section_move.courseid = course_id;\r\n              section_move.current_chapter = cur_chap;\r\n              section_move.current_section = cur_section;\r\n              section_move.first_chapter = first_chap;\r\n              section_move.first_section = first_section;\r\n              section_move.last_chapter = last_chap;\r\n              section_move.last_section = last_section;\r\n\r\n              if (cur === first) {\r\n                section_move.direction = 'down';\r\n                section_move.chapter_clicked = last_chap;\r\n                section_move.section_clicked = last_section;\r\n              }\r\n              if (cur === last) {\r\n                section_move.direction = 'up';\r\n                section_move.chapter_clicked = first_chap;\r\n                section_move.section_clicked = first_section;\r\n              }\r\n              $.ajax({\r\n                type: 'POST',\r\n                data: section_move,\r\n                url: 'section_move.php',\r\n                success: (section_move) => {\r\n                Y.log('Data Chapter : ' + section_move);\r\n                window.location.reload();\r\n            },\r\n              });\r\n              return true;\r\n            }\r\n          }).disableSelection();\r\n      }\r\n    }\r\n});"],"file":"confirm_section_move.min.js"}