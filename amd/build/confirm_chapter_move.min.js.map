{"version":3,"sources":["../src/confirm_chapter_move.js"],"names":["define","$","sec_number_cur_chap","courseId","cur_chapter_index","click","event","currentTarget","classList","substring","length","sectionCount","idC","titleC","parseInt","defaultValue","direction","attr","split","dataChapter","id","courseid","chapter_title","sectionid","sectionnumber","ajax","type","data","url","success","Y","log","window","location","reload"],"mappings":"AAyBAA,OAAM,sCAAC,CAAC,QAAD,CAAD,CAAa,SAACC,CAAD,CAAM,IAGjBC,CAAAA,CAAmB,CAAG,EAHL,CAIjBC,CAAQ,CAAG,EAJM,CAKjBC,CAAiB,CAAG,CALH,CAQrBH,CAAC,CAAC,YAAD,CAAD,CAAgBI,KAAhB,CAAsB,SAASC,CAAT,CAAgB,CAClCF,CAAiB,CAAGE,CAAK,CAACC,aAAN,CAAoBC,SAApB,CAA8B,CAA9B,EAAiCC,SAAjC,CAA2C,CAA3C,CAA8CH,CAAK,CAACC,aAAN,CAAoBC,SAApB,CAA8B,CAA9B,EAAiCE,MAA/E,CAApB,CADkC,GAE9BC,CAAAA,CAAY,CAAGV,CAAC,CAAC,yBAA2BG,CAA5B,CAFc,CAG9BQ,CAAG,CAAGX,CAAC,CAAC,cAAgBG,CAAjB,CAHuB,CAI9BS,CAAM,CAAGZ,CAAC,CAAC,iBAAmBG,CAApB,CAJoB,CAKlCD,CAAQ,CAAGF,CAAC,CAAC,aAAeG,CAAhB,CAAZ,CAEAF,CAAmB,CAAGY,QAAQ,CAACH,CAAY,CAAC,CAAD,CAAZ,CAAgBI,YAAjB,CAA9B,CAPkC,GAQ9BC,CAAAA,CAAS,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQgB,IAAR,CAAa,OAAb,EAAsBC,KAAtB,CAA4B,GAA5B,CARkB,CAS9BC,CAAW,CAAG,EATgB,CAUlCA,CAAW,CAACC,EAAZ,CAAiBN,QAAQ,CAACF,CAAG,CAAC,CAAD,CAAH,CAAOG,YAAR,CAAzB,CACAI,CAAW,CAACE,QAAZ,CAAuBP,QAAQ,CAACX,CAAQ,CAAC,CAAD,CAAR,CAAYY,YAAb,CAA/B,CACAI,CAAW,CAACG,aAAZ,CAA4BT,CAAM,CAAC,CAAD,CAAN,CAAUE,YAAtC,CACAI,CAAW,CAACI,SAAZ,CAAwBT,QAAQ,CAACV,CAAD,CAAhC,CACAe,CAAW,CAACK,aAAZ,CAA4BtB,CAA5B,CACAiB,CAAW,CAACH,SAAZ,CAAwBA,CAAS,CAAC,CAAD,CAAjC,CACAf,CAAC,CAACwB,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHC,IAAI,CAAER,CAFH,CAGHS,GAAG,CAAE,kBAHF,CAIHC,OAAO,CAAE,iBAACV,CAAD,CAAiB,CACtBW,CAAC,CAACC,GAAF,CAAM,kBAAoBZ,CAA1B,EACAa,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACH,CAPE,CAAP,CASH,CAzBD,CA4BH,CApCK,CAAN","sourcesContent":["/* eslint-disable camelcase */\r\n// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Change the position for a chapter in table of content (Chapter content one or many lesson),\r\n * By the way we have to update the format_mooin4_chapter, format_mooin4_section, course_sections Table and the lib.php content data\r\n *\r\n * @module     format_mooin4/confirm_chapter_move\r\n * @copyright  2022 Perial Dupont Nguefack Kuaguim\r\n */\r\n\r\n// What is important here is the current chapter that we want to move inside our table of content\r\ndefine(['jquery'], ($) =>{\r\n    // Var triggerUp = $('.up');\r\n    // Var triggerDown = $('.down');\r\n    var sec_number_cur_chap = '';\r\n    var courseId = '';\r\n    var cur_chapter_index = 0;\r\n\r\n    // Move the chapter Up\r\n    $('.up, .down').click(function(event) {\r\n        cur_chapter_index = event.currentTarget.classList[2].substring(7, event.currentTarget.classList[2].length);\r\n        let sectionCount = $('.chapter_sectionnumber' + cur_chapter_index);\r\n        let idC = $('.id_chapter' + cur_chapter_index);\r\n        let titleC = $('.chapter_title' + cur_chapter_index);\r\n        courseId = $('.id_course' + cur_chapter_index);\r\n        // Get the right section number in the currrent chapter.\r\n        sec_number_cur_chap = parseInt(sectionCount[0].defaultValue);\r\n        let direction = $(this).attr(\"class\").split(' ');\r\n        var dataChapter = {};\r\n        dataChapter.id = parseInt(idC[0].defaultValue);\r\n        dataChapter.courseid = parseInt(courseId[0].defaultValue);\r\n        dataChapter.chapter_title = titleC[0].defaultValue;\r\n        dataChapter.sectionid = parseInt(cur_chapter_index);\r\n        dataChapter.sectionnumber = sec_number_cur_chap;\r\n        dataChapter.direction = direction[3];\r\n        $.ajax({\r\n            type: 'POST',\r\n            data: dataChapter,\r\n            url: 'chapter_move.php',\r\n            success: (dataChapter) => {\r\n                Y.log('Data Chapter : ' + dataChapter);\r\n                window.location.reload();\r\n            },\r\n        });\r\n    });\r\n\r\n    // Move the chapter Down\r\n});"],"file":"confirm_chapter_move.min.js"}